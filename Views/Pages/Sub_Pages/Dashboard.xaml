<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="Toyo_cable_UI.Views.Pages.Sub_Pages.Dashboard"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ScottPlot="using:ScottPlot.WinUI"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:Toyo_cable_UI.Views.Pages.Sub_Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:Toyo_cable_UI.Models"
    mc:Ignorable="d">

    <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
        <Grid RequestedTheme="Light">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!--  Header Row  -->
            <Grid
                Grid.Row="0"
                Padding="30,20"
                Background="White"
                CornerRadius="0,0,12,12">
                <StackPanel>
                    <TextBlock
                        FontSize="28"
                        FontWeight="Bold"
                        Foreground="#1A1A2E"
                        Text="Dashboard" />
                    <TextBlock
                        Margin="0,4,0,0"
                        FontSize="14"
                        Foreground="#6B7280"
                        Text="Overview of Sales and Operations" />
                </StackPanel>
            </Grid>

            <!--  Content Row  -->
            <Grid Grid.Row="1" Margin="20,10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  Row 01: Four Equal Width Cards  -->
                <Grid Grid.Row="0" Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1*" />
                    </Grid.ColumnDefinitions>

                    <!--  Card 1: Total Orders  -->
                    <Border
                        Grid.Column="0"
                        Margin="0,0,10,0"
                        Padding="20"
                        Background="#E3F2FD"
                        CornerRadius="8">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <StackPanel
                                Grid.Column="0"
                                VerticalAlignment="Center"
                                Spacing="8">
                                <TextBlock
                                    FontSize="14"
                                    Foreground="#666666"
                                    Text="Total Orders" />
                                <TextBlock
                                    x:Name="totalOrdersText"
                                    FontSize="28"
                                    FontWeight="Bold"
                                    Foreground="#1976D2"
                                    Text="0" />
                            </StackPanel>

                            <Border
                                Grid.Column="1"
                                Width="50"
                                Height="50"
                                VerticalAlignment="Center"
                                Background="#1976D2"
                                CornerRadius="25">
                                <FontIcon
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    FontSize="24"
                                    Foreground="White"
                                    Glyph="&#xE7BF;" />
                            </Border>
                        </Grid>
                    </Border>

                    <!--  Card 2: Total Revenue  -->
                    <Border
                        Grid.Column="1"
                        Margin="5,0"
                        Padding="20"
                        Background="#E8F5E9"
                        CornerRadius="8">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <StackPanel
                                Grid.Column="0"
                                VerticalAlignment="Center"
                                Spacing="8">
                                <TextBlock
                                    FontSize="14"
                                    Foreground="#666666"
                                    Text="Total Revenue" />
                                <TextBlock
                                    x:Name="totalRevenueText"
                                    FontSize="28"
                                    FontWeight="Bold"
                                    Foreground="#388E3C"
                                    Text="Rs.0.00" />
                            </StackPanel>

                            <Border
                                Grid.Column="1"
                                Width="50"
                                Height="50"
                                VerticalAlignment="Center"
                                Background="#388E3C"
                                CornerRadius="25">
                                <FontIcon
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    FontSize="24"
                                    Foreground="White"
                                    Glyph="&#xE8AB;" />
                            </Border>
                        </Grid>
                    </Border>

                    <!--  Card 3: Total Products  -->
                    <Border
                        Grid.Column="2"
                        Margin="5,0"
                        Padding="20"
                        Background="#FFF3E0"
                        CornerRadius="8">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <StackPanel
                                Grid.Column="0"
                                VerticalAlignment="Center"
                                Spacing="8">
                                <TextBlock
                                    FontSize="14"
                                    Foreground="#666666"
                                    Text="Total Products" />
                                <TextBlock
                                    x:Name="totalProductsText"
                                    FontSize="28"
                                    FontWeight="Bold"
                                    Foreground="#F57C00"
                                    Text="0" />
                            </StackPanel>

                            <Border
                                Grid.Column="1"
                                Width="50"
                                Height="50"
                                VerticalAlignment="Center"
                                Background="#F57C00"
                                CornerRadius="25">
                                <FontIcon
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    FontSize="24"
                                    Foreground="White"
                                    Glyph="&#xE8F1;" />
                            </Border>
                        </Grid>
                    </Border>

                    <!--  Card 4: Total Categories  -->
                    <Border
                        Grid.Column="3"
                        Margin="10,0,0,0"
                        Padding="20"
                        Background="#F3E5F5"
                        CornerRadius="8">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <StackPanel
                                Grid.Column="0"
                                VerticalAlignment="Center"
                                Spacing="8">
                                <TextBlock
                                    FontSize="14"
                                    Foreground="#666666"
                                    Text="Total Categories" />
                                <TextBlock
                                    x:Name="totalCategoriesText"
                                    FontSize="28"
                                    FontWeight="Bold"
                                    Foreground="#7B1FA2"
                                    Text="0" />
                            </StackPanel>

                            <Border
                                Grid.Column="1"
                                Width="50"
                                Height="50"
                                VerticalAlignment="Center"
                                Background="#7B1FA2"
                                CornerRadius="25">
                                <FontIcon
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    FontSize="24"
                                    Foreground="White"
                                    Glyph="&#xE74C;" />
                            </Border>
                        </Grid>
                    </Border>
                </Grid>

                <!--  Row 02: Charts  -->
                <Grid Grid.Row="1" Margin="0,0,0,20">
                    <!--  Column Definition  -->
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*" />
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="0">
                        <ScottPlot:WinUIPlot x:Name="MyPlotControl" Height="350" />
                    </Grid>
                </Grid>

                <!--  Row 03: Table Content  -->
                <Grid Grid.Row="2">
                    <!--  Column Definition  -->
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1*" />
                    </Grid.ColumnDefinitions>

                    <!--  Low Stock Alert Table  -->
                    <Border
                        Grid.Column="0"
                        Margin="0,0,10,0"
                        Padding="20"
                        Background="White"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1"
                        CornerRadius="8">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <!--  Table Header  -->
                            <Grid Grid.Row="0" Margin="0,0,0,15">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel
                                    Grid.Column="0"
                                    Orientation="Horizontal"
                                    Spacing="10">
                                    <Border
                                        Width="40"
                                        Height="40"
                                        Background="#FFF3E0"
                                        CornerRadius="20">
                                        <FontIcon
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            FontSize="20"
                                            Foreground="#F57C00"
                                            Glyph="&#xE7BA;" />
                                    </Border>
                                    <StackPanel VerticalAlignment="Center">
                                        <TextBlock
                                            FontSize="18"
                                            FontWeight="SemiBold"
                                            Foreground="#333333"
                                            Text="Low Stock Alert" />
                                        <TextBlock
                                            FontSize="12"
                                            Foreground="#999999"
                                            Text="Products running low" />
                                    </StackPanel>
                                </StackPanel>
                            </Grid>

                            <!--  Table Content  -->
                            <ScrollViewer
                                Grid.Row="1"
                                MaxHeight="400"
                                VerticalScrollBarVisibility="Auto">
                                <StackPanel Spacing="0">
                                    <!--  Table Headers  -->
                                    <Grid
                                        Margin="0,0,0,5"
                                        Padding="10,8"
                                        Background="#F5F5F5"
                                        CornerRadius="4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="2*" />
                                            <ColumnDefinition Width="1*" />
                                            <ColumnDefinition Width="1*" />
                                        </Grid.ColumnDefinitions>

                                        <TextBlock
                                            Grid.Column="0"
                                            FontSize="12"
                                            FontWeight="SemiBold"
                                            Foreground="#666666"
                                            Text="Product Name" />
                                        <TextBlock
                                            Grid.Column="1"
                                            HorizontalAlignment="Center"
                                            FontSize="12"
                                            FontWeight="SemiBold"
                                            Foreground="#666666"
                                            Text="Stock" />
                                        <TextBlock
                                            Grid.Column="2"
                                            HorizontalAlignment="Center"
                                            FontSize="12"
                                            FontWeight="SemiBold"
                                            Foreground="#666666"
                                            Text="Status" />
                                    </Grid>

                                    <!--  Table Row 1  -->
                                    <ItemsRepeater ItemsSource="{x:Bind LowStockProducts}">
                                        <ItemsRepeater.ItemTemplate>
                                            <DataTemplate x:DataType="models:Products">
                                                <Border
                                                    Padding="10,12"
                                                    BorderBrush="#E0E0E0"
                                                    BorderThickness="0,0,0,1">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="2*" />
                                                            <ColumnDefinition Width="1*" />
                                                            <ColumnDefinition Width="1*" />
                                                        </Grid.ColumnDefinitions>

                                                        <StackPanel Grid.Column="0">
                                                            <TextBlock
                                                                FontSize="14"
                                                                Foreground="#333333"
                                                                Text="{x:Bind Name}" />
                                                            <TextBlock
                                                                FontSize="11"
                                                                Foreground="#999999"
                                                                Text="{x:Bind Category}" />
                                                        </StackPanel>

                                                        <TextBlock
                                                            Grid.Column="1"
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            FontSize="14"
                                                            FontWeight="SemiBold"
                                                            Foreground="#F44336"
                                                            Text="{x:Bind Quantity}" />

                                                        <Border
                                                            Grid.Column="2"
                                                            Padding="8,4"
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Background="#FFEBEE"
                                                            CornerRadius="12">
                                                            <TextBlock
                                                                FontSize="11"
                                                                FontWeight="SemiBold"
                                                                Foreground="#D32F2F"
                                                                Text="Low Stock" />
                                                        </Border>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsRepeater.ItemTemplate>
                                    </ItemsRepeater>

                                </StackPanel>
                            </ScrollViewer>
                        </Grid>
                    </Border>

                    <!--  Top Sale Products Table  -->
                    <Border
                        Grid.Column="1"
                        Margin="10,0,0,0"
                        Padding="20"
                        Background="White"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1"
                        CornerRadius="8">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <!--  Table Header  -->
                            <Grid Grid.Row="0" Margin="0,0,0,15">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel
                                    Grid.Column="0"
                                    Orientation="Horizontal"
                                    Spacing="10">
                                    <Border
                                        Width="40"
                                        Height="40"
                                        Background="#E8F5E9"
                                        CornerRadius="20">
                                        <FontIcon
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            FontSize="20"
                                            Foreground="#388E3C"
                                            Glyph="&#xE734;" />
                                    </Border>
                                    <StackPanel VerticalAlignment="Center">
                                        <TextBlock
                                            FontSize="18"
                                            FontWeight="SemiBold"
                                            Foreground="#333333"
                                            Text="Top Sale Products" />
                                        <TextBlock
                                            FontSize="12"
                                            Foreground="#999999"
                                            Text="Best performing items" />
                                    </StackPanel>
                                </StackPanel>
                            </Grid>

                            <!--  Table Content  -->
                            <ScrollViewer
                                Grid.Row="1"
                                MaxHeight="400"
                                VerticalScrollBarVisibility="Auto">
                                <StackPanel Spacing="0">
                                    <!--  Table Headers  -->
                                    <Grid
                                        Margin="0,0,0,5"
                                        Padding="10,8"
                                        Background="#F5F5F5"
                                        CornerRadius="4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="2*" />
                                            <ColumnDefinition Width="1*" />
                                            <ColumnDefinition Width="1*" />
                                        </Grid.ColumnDefinitions>

                                        <TextBlock
                                            Grid.Column="0"
                                            FontSize="12"
                                            FontWeight="SemiBold"
                                            Foreground="#666666"
                                            Text="Product Name" />
                                        <TextBlock
                                            Grid.Column="1"
                                            HorizontalAlignment="Center"
                                            FontSize="12"
                                            FontWeight="SemiBold"
                                            Foreground="#666666"
                                            Text="Sales" />
                                        <TextBlock
                                            Grid.Column="2"
                                            HorizontalAlignment="Right"
                                            FontSize="12"
                                            FontWeight="SemiBold"
                                            Foreground="#666666"
                                            Text="Revenue (Rs.)" />
                                    </Grid>

                                    <!--  Dynamic Table Rows  -->
                                    <ItemsRepeater ItemsSource="{x:Bind BestSellingProducts, Mode=OneWay}">
                                        <ItemsRepeater.ItemTemplate>
                                            <DataTemplate x:DataType="models:BestSellingProduct">
                                                <Border
                                                    Padding="10,12"
                                                    BorderBrush="#E0E0E0"
                                                    BorderThickness="0,0,0,1">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="2*" />
                                                            <ColumnDefinition Width="1*" />
                                                            <ColumnDefinition Width="1*" />
                                                        </Grid.ColumnDefinitions>

                                                        <StackPanel Grid.Column="0">
                                                            <TextBlock
                                                                FontSize="14"
                                                                Foreground="#333333"
                                                                Text="{x:Bind ProductName}" />
                                                            <TextBlock
                                                                FontSize="11"
                                                                Foreground="#999999"
                                                                Text="{x:Bind Category}" />
                                                        </StackPanel>

                                                        <StackPanel
                                                            Grid.Column="1"
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center">
                                                            <TextBlock
                                                                HorizontalAlignment="Center"
                                                                FontSize="14"
                                                                FontWeight="SemiBold"
                                                                Foreground="#333333"
                                                                Text="{x:Bind FormattedSales}" />
                                                            <TextBlock
                                                                HorizontalAlignment="Center"
                                                                FontSize="10"
                                                                Foreground="#999999"
                                                                Text="units" />
                                                        </StackPanel>

                                                        <TextBlock
                                                            Grid.Column="2"
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Center"
                                                            FontSize="14"
                                                            FontWeight="SemiBold"
                                                            Foreground="#388E3C"
                                                            Text="{x:Bind FormattedRevenue}" />
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsRepeater.ItemTemplate>
                                    </ItemsRepeater>
                                </StackPanel>
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </Grid>
            </Grid>
        </Grid>
    </ScrollViewer>
</Page>