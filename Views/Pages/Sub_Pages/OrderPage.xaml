<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="Toyo_cable_UI.Views.Pages.Sub_Pages.OrderPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:Toyo_cable_UI.Views.Pages.Sub_Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:Toyo_cable_UI.Models"
    mc:Ignorable="d">

    <Grid RequestedTheme="Light">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="320" />
        </Grid.ColumnDefinitions>

        <!--  Column 01 - Products  -->
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!--  Header Row  -->
            <Grid
                Grid.Row="0"
                Padding="30,20"
                Background="White"
                CornerRadius="0,0,12,12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="1*" />
                </Grid.ColumnDefinitions>

                <StackPanel>
                    <TextBlock
                        FontSize="28"
                        FontWeight="Bold"
                        Foreground="#1A1A2E"
                        Text="Orders" />
                    <TextBlock
                        Margin="0,4,0,0"
                        FontSize="14"
                        Foreground="#6B7280"
                        Text="Select Products and Finalize the Order" />
                </StackPanel>

                <Grid Grid.Column="1" HorizontalAlignment="Right">
                    <AutoSuggestBox
                        x:Name="SearchTextBox"
                        Width="280"
                        Height="35"
                        PlaceholderText="Search Product Here"
                        QuerySubmitted="SearchBox_QuerySubmitted"
                        SuggestionChosen="SearchBox_SuggestionChosen"
                        TextChanged="SearchBox_TextChanged" />
                </Grid>
            </Grid>

            <!--  Categories section  -->
            <Grid Grid.Row="1" Margin="20,10">
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <ToggleButton Content="All Products" />
                    <ItemsRepeater ItemsSource="{x:Bind Categories}">
                        <ItemsRepeater.ItemTemplate>
                            <DataTemplate x:DataType="models:Category">
                                <ToggleButton Content="{x:Bind Name}" />
                            </DataTemplate>
                        </ItemsRepeater.ItemTemplate>
                    </ItemsRepeater>
                </StackPanel>
            </Grid>

            <!--  Product Grid section  -->
            <ScrollViewer
                Grid.Row="2"
                Margin="10"
                VerticalScrollBarVisibility="Auto">

                <ItemsRepeater ItemsSource="{x:Bind Products}">
                    <ItemsRepeater.Layout>
                        <UniformGridLayout
                            ItemsStretch="None"
                            MinColumnSpacing="8"
                            MinItemHeight="300"
                            MinItemWidth="220"
                            MinRowSpacing="8" />
                    </ItemsRepeater.Layout>

                    <ItemsRepeater.ItemTemplate>
                        <DataTemplate x:DataType="models:Products">
                            <Border
                                Width="220"
                                Margin="0,0,4,8"
                                Padding="15"
                                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                BorderThickness="1"
                                CornerRadius="12">
                                <StackPanel Spacing="5">
                                    <Border
                                        Padding="8,4"
                                        HorizontalAlignment="Left"
                                        Background="{x:Bind stockBackgroundColour}"
                                        CornerRadius="4">
                                        <TextBlock
                                            FontSize="11"
                                            FontWeight="SemiBold"
                                            Foreground="White"
                                            Text="{x:Bind stockStatus}" />
                                    </Border>

                                    <Border
                                        Height="140"
                                        Padding="5"
                                        Background="{ThemeResource LayerFillColorDefaultBrush}"
                                        CornerRadius="8">
                                        <Image Source="{x:Bind ImageUrl}" Stretch="Uniform" />
                                    </Border>

                                    <StackPanel Spacing="5">
                                        <TextBlock
                                            FontSize="15"
                                            FontWeight="SemiBold"
                                            Text="{x:Bind Name}"
                                            TextTrimming="CharacterEllipsis" />
                                        <TextBlock
                                            FontSize="12"
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            MaxLines="2"
                                            Text="{x:Bind Category}"
                                            TextTrimming="CharacterEllipsis"
                                            TextWrapping="Wrap" />
                                    </StackPanel>

                                    <Grid Margin="0,5,0,0">
                                        <StackPanel Orientation="Horizontal" Spacing="5">
                                            <TextBlock
                                                VerticalAlignment="Center"
                                                FontSize="16"
                                                FontWeight="Bold"
                                                Text="Rs." />
                                            <TextBlock
                                                VerticalAlignment="Center"
                                                FontSize="16"
                                                FontWeight="Bold"
                                                Text="{x:Bind Price}" />
                                        </StackPanel>
                                        <Button
                                            Padding="8"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Click="addToCartButton_Click"
                                            CornerRadius="6"
                                            DataContext="{x:Bind}"
                                            Tag="{x:Bind}">
                                            <StackPanel Orientation="Horizontal" Spacing="5">
                                                <FontIcon FontSize="14" Glyph="&#xE710;" />
                                                <TextBlock FontSize="12" Text="Add to Cart" />
                                            </StackPanel>
                                        </Button>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsRepeater.ItemTemplate>
                </ItemsRepeater>
            </ScrollViewer>

        </Grid>

        <!--  Column 02 - Cart Panel  -->
        <Grid
            Grid.Column="1"
            Padding="15"
            Background="#E3F2FD">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!--  Cart Header  -->
            <StackPanel
                Grid.Row="0"
                Margin="0,10,0,15"
                Orientation="Horizontal"
                Spacing="10">
                <FontIcon FontSize="25" Glyph="&#xE7BF;" />
                <TextBlock
                    FontSize="25"
                    FontWeight="SemiBold"
                    Text="Cart" />
            </StackPanel>

            <!--  Detail Transaction Header  -->
            <Grid Grid.Row="1" Margin="0,0,0,15">
                <TextBlock
                    VerticalAlignment="Center"
                    FontSize="16"
                    FontWeight="SemiBold"
                    Text="Detail Transaction" />
                <Button
                    Padding="10,6"
                    HorizontalAlignment="Right"
                    Click="ResetOrder_Click"
                    Content="Reset Order"
                    CornerRadius="6"
                    FontSize="11"
                    Style="{ThemeResource AccentButtonStyle}" />
            </Grid>

            <!--  Cart Items List  -->
            <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
                <ItemsRepeater ItemsSource="{x:Bind CartItems}">
                    <ItemsRepeater.ItemTemplate>
                        <DataTemplate x:DataType="models:CartItem">
                            <Grid
                                Margin="0,0,0,12"
                                Padding="10"
                                Background="White"
                                CornerRadius="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="55" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <!--  Product Image  -->
                                <Border
                                    Grid.Column="0"
                                    Width="45"
                                    Height="45"
                                    Padding="4"
                                    Background="#F5F5F5"
                                    CornerRadius="8">
                                    <Image Source="{x:Bind ImageUrl}" Stretch="Uniform" />
                                </Border>

                                <!--  Product Details  -->
                                <StackPanel
                                    Grid.Column="1"
                                    Margin="8,0,0,0"
                                    VerticalAlignment="Center"
                                    Spacing="3">
                                    <TextBlock
                                        FontSize="13"
                                        FontWeight="SemiBold"
                                        Text="{x:Bind ProductName}" />
                                    <StackPanel Orientation="Horizontal" Spacing="6">
                                        <TextBlock
                                            FontSize="10"
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            Text="{x:Bind Category}" />
                                    </StackPanel>

                                    <!--  Quantity Controls  -->
                                    <StackPanel
                                        Margin="0,3,0,0"
                                        Orientation="Horizontal"
                                        Spacing="6">
                                        <Button
                                            Width="22"
                                            Height="22"
                                            Padding="0"
                                            Click="DecreaseQuantity_Click"
                                            CornerRadius="4"
                                            DataContext="{x:Bind}"
                                            Tag="{x:Bind}">
                                            <FontIcon FontSize="9" Glyph="&#xE738;" />
                                        </Button>
                                        <TextBlock
                                            MinWidth="20"
                                            VerticalAlignment="Center"
                                            FontSize="12"
                                            FontWeight="SemiBold"
                                            Text="{x:Bind Quantity, Mode=OneWay}"
                                            TextAlignment="Center" />
                                        <Button
                                            Width="22"
                                            Height="22"
                                            Padding="0"
                                            Click="IncreaseQuantity_Click"
                                            CornerRadius="4"
                                            DataContext="{x:Bind}"
                                            Tag="{x:Bind}">
                                            <FontIcon FontSize="9" Glyph="&#xE710;" />
                                        </Button>
                                    </StackPanel>
                                </StackPanel>

                                <!--  Price and Delete  -->
                                <StackPanel
                                    Grid.Column="2"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Top"
                                    Spacing="6">
                                    <Button
                                        Width="28"
                                        Height="28"
                                        Padding="0"
                                        HorizontalAlignment="Right"
                                        Background="{ThemeResource SystemFillColorCriticalBrush}"
                                        Click="RemoveFromCart_Click"
                                        CornerRadius="14"
                                        DataContext="{x:Bind}"
                                        Tag="{x:Bind}">
                                        <Button.Resources>
                                            <SolidColorBrush x:Key="ButtonBackgroundPointerOver" Color="#FF0000" />
                                        </Button.Resources>
                                        <FontIcon
                                            FontSize="11"
                                            Foreground="White"
                                            Glyph="&#xE74D;" />
                                    </Button>
                                    <TextBlock
                                        FontSize="14"
                                        FontWeight="Bold"
                                        Text="{x:Bind TotalPrice, Mode=OneWay}"
                                        TextAlignment="Right" />
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </ItemsRepeater.ItemTemplate>
                </ItemsRepeater>
            </ScrollViewer>

            <!--  Summary and Payment  -->
            <StackPanel Grid.Row="4" Spacing="10">
                <!--  Summary Lines  -->
                <Grid>
                    <TextBlock
                        FontSize="12"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                        Text="Sub-Total" />
                    <TextBlock
                        x:Name="subTotalText"
                        HorizontalAlignment="Right"
                        FontSize="12"
                        FontWeight="SemiBold"
                        Text="Rs. 0.00" />
                </Grid>
                <Grid>
                    <TextBlock
                        FontSize="12"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                        Text="Discount" />
                    <TextBlock
                        x:Name="discountText"
                        HorizontalAlignment="Right"
                        FontSize="12"
                        FontWeight="SemiBold"
                        Foreground="#EF4444"
                        Text="- Rs. 0.00" />
                </Grid>

                <Border
                    Height="1"
                    Margin="0,4"
                    Background="{ThemeResource DividerStrokeColorDefaultBrush}" />

                <Grid>
                    <TextBlock
                        FontSize="14"
                        FontWeight="Bold"
                        Text="Total Payment" />
                    <TextBlock
                        x:Name="totalPaymentText"
                        HorizontalAlignment="Right"
                        FontSize="12"
                        FontWeight="SemiBold"
                        Text="Rs. 0.00" />
                </Grid>

                <!--  Continue Button  -->
                <Button
                    Margin="0,8,0,0"
                    Padding="0,8"
                    HorizontalAlignment="Stretch"
                    BorderThickness="0"
                    Click="PlaceOrder_Click"
                    CornerRadius="8"
                    FontWeight="Bold"
                    Style="{ThemeResource AccentButtonStyle}">
                    <TextBlock FontSize="17" Text="Place Order" />
                </Button>
            </StackPanel>
        </Grid>
    </Grid>
</Page>